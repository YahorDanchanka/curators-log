<?php

namespace Database\Seeders;

use App\Models\AdministrativeDivision;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;

class AdministrativeDivisionSeeder extends Seeder
{
    public function run(): void
    {
        $regions = [
            [
                'name' => 'Брестская',
                'districts' => [
                    'Барановичский',
                    'Берёзовский',
                    'Брестский',
                    'Ганцевичский',
                    'Дрогичинский',
                    'Жабинковский',
                    'Ивановский',
                    'Ивацевичский',
                    'Каменецкий',
                    'Кобринский',
                    'Лунинецкий',
                    'Ляховичский',
                    'Малоритский',
                    'Пинский',
                    'Пружанский',
                    'Столинский',
                ],
            ],
            [
                'name' => 'Витебская',
                'districts' => [
                    'Бешенковичский',
                    'Браславский',
                    'Верхнедвинский',
                    'Витебский',
                    'Глубокский',
                    'Городокский',
                    'Докшицкий',
                    'Дубровенский',
                    'Лепельский',
                    'Лиозненский',
                    'Миорский',
                    'Оршанский',
                    'Полоцкий',
                    'Поставский',
                    'Россонский',
                    'Сенненский',
                    'Толочинский',
                    'Ушачский',
                    'Чашникский',
                    'Шарковщинский',
                    'Шумилинский',
                ],
            ],
            [
                'name' => 'Гомельская',
                'districts' => [
                    'Брагинский',
                    'Буда-Кошелевский',
                    'Ветковский',
                    'Гомельский',
                    'Добрушский',
                    'Ельский',
                    'Житковичский',
                    'Жлобинский',
                    'Калинковичский',
                    'Кормянский',
                    'Лельчицкий',
                    'Лоевский',
                    'Мозырский',
                    'Наровлянский',
                    'Октябрьский',
                    'Петриковский',
                    'Речицкий',
                    'Рогачевский',
                    'Светлогорский',
                    'Хойникский',
                    'Чечерский',
                ],
            ],
            [
                'name' => 'Гродненская',
                'districts' => [
                    'Берестовицкий',
                    'Волковысский',
                    'Вороновский',
                    'Гродненский',
                    'Дятловский',
                    'Зельвенский',
                    'Ивьевский',
                    'Кореличский',
                    'Лидский',
                    'Мостовский',
                    'Новогрудский',
                    'Островецкий',
                    'Ошмянский',
                    'Свислочский',
                    'Слонимский',
                    'Сморгонский',
                    'Щучинский',
                ],
            ],
            [
                'name' => 'Минская',
                'districts' => [
                    'Березинский',
                    'Борисовский',
                    'Вилейский',
                    'Воложинский',
                    'Дзержинский',
                    'Клецкий',
                    'Копыльский',
                    'Крупский',
                    'Логойский',
                    'Любанский',
                    'Минский',
                    'Молодечненский',
                    'Мядельский',
                    'Несвижский',
                    'Пуховичский',
                    'Слуцкий',
                    'Смолевичский',
                    'Солигорский',
                    'Стародорожский',
                    'Столбцовский',
                    'Узденский',
                    'Червенский',
                ],
            ],
            [
                'name' => 'Могилевская',
                'districts' => [
                    'Белыничский',
                    'Бобруйский',
                    'Быховский',
                    'Глусский',
                    'Горецкий',
                    'Дрибинский',
                    'Кировский',
                    'Климовичский',
                    'Кличевский',
                    'Костюковичский',
                    'Краснопольский',
                    'Кричевский',
                    'Круглянский',
                    'Могилевский',
                    'Мстиславский',
                    'Осиповичский',
                    'Славгородский',
                    'Хотимский',
                    'Чаусский',
                    'Чериковский',
                    'Шкловский',
                ],
            ],
        ];

        DB::transaction(function () use ($regions) {
            foreach ($regions as $region) {
                $regionModel = new AdministrativeDivision();
                $regionModel->fill(['type' => 'region', 'name' => $region['name']]);
                $regionModel->timestamps = false;
                $regionModel->save();

                $rows = array_map(function ($district) use ($regionModel) {
                    return ['type' => 'district', 'name' => $district, 'parent_id' => $regionModel->id];
                }, $region['districts']);

                AdministrativeDivision::insert($rows);
            }
        });
    }
}
